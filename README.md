# Restaurant SPPR

Система поддержки принятия решений для управления рестораном

## Обзор проекта

Restaurant SPPR представляет собой комплексную информационную систему, которая помогает в управлении рестораном и принятии бизнес-решений. Система состоит из бэкенда на FastAPI и фронтенда на Next.js с хранением данных в SQLite.

### Целевая аудитория и роли пользователей

Приложение разработано для работы с четырьмя основными группами пользователей:

1. **Гости (неавторизованные пользователи)**
   - Просмотр меню ресторана
   - Просмотр информации о ресторане
   - Создание бронирований столиков
   - Регистрация и авторизация

2. **Клиенты (авторизованные пользователи)**
   - Все функции гостей
   - Создание и управление заказами
   - Отслеживание статуса заказов
   - Управление личным профилем
   - История заказов и бронирований
   - Добавление отзывов о блюдах

3. **Официанты**
   - Управление закрепленными столиками
   - Создание заказов для посетителей ресторана
   - Обработка и изменение статусов заказов
   - Просмотр ближайших бронирований
   - Мобильный интерфейс для работы на планшетах

4. **Администраторы**
   - Полное управление рестораном
   - Редактирование меню и категорий
   - Управление пользователями
   - Обработка заказов и бронирований
   - Доступ к аналитике и отчетам
   - Настройка параметров ресторана

### Основные функциональные модули:

1. **Управление пользователями**:
   - Три роли пользователей: администратор, официант, клиент
   - Аутентификация и авторизация
   - Управление профилями пользователей
   - Регистрация и восстановление пароля

2. **Управление меню**:
   - Категории блюд с возможностью вложенности
   - Блюда с детальной информацией (название, описание, цена, себестоимость)
   - Аллергены и теги для блюд
   - Отзывы и рейтинги блюд
   - Акционные и специальные предложения

3. **Управление заказами**:
   - Создание и отслеживание заказов
   - Статусы заказов (в обработке, готовится, завершен и др.)
   - Обработка оплаты (наличные, карта, онлайн)
   - Система доставки и самовывоза
   - Отзывы о заказах

4. **Бронирование столиков**:
   - Управление столиками ресторана
   - Создание и отмена бронирований
   - Визуальная схема размещения столиков
   - Учет загруженности ресторана по времени
   - QR-коды для подтверждения бронирования

5. **Настройки ресторана**:
   - Основная информация (название, адрес, контакты)
   - Рабочие часы и график работы
   - Настройки валюты и налогов
   - Параметры доставки и самовывоза
   - Управление изображениями и медиа-контентом

6. **Аналитика и поддержка принятия решений**:
   - Финансовая аналитика (выручка, прибыль, средний чек)
   - Анализ продаж блюд и категорий
   - Статистика загруженности столиков
   - Анализ эффективности персонала
   - Прогнозирование продаж и необходимых запасов
   - Рекомендации по оптимизации бизнес-процессов

### Функции поддержки принятия решений:

1. **Оптимизация меню**:
   - Выявление наименее продаваемых блюд с рекомендациями по их обновлению
   - Продвижение высокомаржинальных блюд
   - Анализ популярности категорий блюд
   - Рекомендации по сезонным обновлениям меню

2. **Управление персоналом**:
   - Рекомендации по распределению персонала в пиковые часы
   - Оптимизация расписания сотрудников
   - Оценка эффективности официантов
   - Анализ скорости обслуживания клиентов

3. **Маркетинговые акции**:
   - Предложения по проведению акций на определенные блюда
   - Прогноз потенциального увеличения выручки от акций
   - Рекомендации по комбо-предложениям
   - Анализ результативности прошлых акций

4. **Оптимизация запасов**:
   - Прогноз необходимых запасов продуктов
   - Рекомендации по оптимальным закупкам
   - Минимизация отходов
   - Анализ сезонных колебаний в потреблении ингредиентов

5. **Финансовое планирование**:
   - Прогноз доходов и расходов
   - Анализ сезонности продаж
   - Рекомендации по ценообразованию
   - Оценка рентабельности отдельных блюд и категорий

## Пользовательские интерфейсы

### Публичная часть (для гостей и клиентов)
- Адаптивный дизайн для мобильных и десктопных устройств
- Поддержка светлой и темной темы
- Интуитивно понятная навигация
- Детальные карточки блюд с фотографиями
- Интерактивная система бронирования столиков
- Удобная корзина с возможностью редактирования заказа

### Административная панель
- Информативные дашборды с ключевыми показателями
- Интерактивные графики и диаграммы
- Таблицы с сортировкой и фильтрацией данных
- Система уведомлений о важных событиях
- Инструменты для массового редактирования данных

### Панель официанта
- Оптимизированный для планшетов интерфейс
- Быстрый доступ к часто используемым функциям
- Интерактивная схема столиков с цветовой индикацией статусов
- Уведомления о новых заказах и бронированиях
- Простой интерфейс для быстрого создания заказов

## Структура проекта

```
restaurant_app/
├── backend/           # Бэкенд на FastAPI
│   ├── app/           # Основной код приложения
│   │   ├── api/       # API-эндпоинты
│   │   ├── core/      # Конфигурация и инициализация
│   │   ├── crud/      # CRUD-операции
│   │   ├── database/  # Подключение к БД
│   │   ├── models/    # SQLAlchemy модели
│   │   ├── schemas/   # Pydantic схемы
│   │   ├── services/  # Бизнес-логика
│   │   └── utils/     # Вспомогательные функции
│   ├── main.py        # Точка входа FastAPI
│   ├── run.py         # Запуск приложения
│   └── requirements.txt # Зависимости бэкенда
├── data/              # Данные (SQLite база данных)
├── frontend/          # Фронтенд на Next.js
│   ├── components/    # React компоненты
│   │   ├── layout/    # Компоненты лейаута
│   │   ├── ui/        # UI компоненты
│   │   └── ...        # Другие компоненты
│   ├── lib/           # Утилиты и API-клиенты
│   ├── pages/         # Next.js страницы
│   │   ├── admin/     # Страницы админ-панели
│   │   ├── waiter/    # Страницы для официантов
│   │   ├── auth/      # Страницы авторизации
│   │   └── ...        # Публичные страницы
│   ├── styles/        # CSS и стили
│   ├── public/        # Статические файлы
│   └── package.json   # Зависимости фронтенда
├── docker/            # Dockerfile для сервисов
└── docker-compose.yml # Конфигурация Docker Compose
```

## Требования

- Python 3.9+
- Node.js 14+
- Redis
- NPM или Yarn
- Docker и Docker Compose (опционально)

## Запуск проекта

### Локальный запуск (без Docker)

1. Клонирование репозитория и создание виртуального окружения:
```bash
git clone <repository-url>
cd restaurant_app
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

2. Установка зависимостей бэкенда:
```bash
cd backend
pip install -r requirements.txt
```

3. Запуск бэкенда:
```bash
python run.py
```

4. Установка зависимостей фронтенда:
```bash
cd ../frontend
npm install
```

5. Запуск фронтенда:
```bash
npm run dev
```

Сервер API будет доступен по адресу [http://localhost:8000](http://localhost:8000).  
Документация API: [http://localhost:8000/docs](http://localhost:8000/docs).  
Фронтенд будет доступен по адресу [http://localhost:3000](http://localhost:3000).

### Запуск с Docker Compose

1. Соберите и запустите контейнеры:
```bash
docker-compose up -d
```

2. Сервер будет доступен по адресу [http://localhost:3000](http://localhost:3000).

## Учётные данные по умолчанию

**Администратор:**
- Email: admin@example.com
- Пароль: admin

**Официант:**
- Email: waiter@example.com
- Пароль: waiter

**Клиент:**
- Email: user@example.com
- Пароль: user

## Документация

### Документация API

Полная документация API доступна по адресу [http://localhost:8000/docs](http://localhost:8000/docs) после запуска проекта.

Основные разделы API:
- `/api/v1/auth` - Аутентификация и регистрация
- `/api/v1/users` - Управление пользователями
- `/api/v1/menu` - Управление меню (категории, блюда)
- `/api/v1/orders` - Управление заказами
- `/api/v1/reservations` - Бронирование столиков
- `/api/v1/analytics` - Аналитика и отчеты

### Документация по страницам

Подробная документация по всем страницам веб-приложения доступна в директории [/frontend/pages/README](/frontend/pages/README/). 