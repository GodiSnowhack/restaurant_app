# Миграция таблицы order_dish в OrderDish

## Описание проблемы

В коде приложения класс модели `OrderDish` имеет свойство `__tablename__ = "order_dish"`, что создает несоответствие между именем класса и именем таблицы в базе данных. Это может привести к ошибкам, особенно при использовании прямых SQL-запросов.

## Решение

1. Изменить имя таблицы в модели с `order_dish` на `OrderDish`
2. Обновить все SQL-запросы, использующие имя таблицы `order_dish`
3. Выполнить миграцию базы данных для переименования таблицы

## Инструкция по применению

1. Убедитесь, что все изменения в коде были применены:
   - В файле `app/models/order.py` свойство `__tablename__` класса `OrderDish` изменено на `"OrderDish"`
   - В файле `app/models/order.py` атрибут `secondary` в отношении `items` модели `Order` изменен на `"OrderDish"`
   - В файле `app/models/menu.py` атрибут `secondary` в отношении `orders` модели `Dish` изменен на `"OrderDish"`
   - В файле `app/services/order.py` все SQL-запросы обновлены для использования `OrderDish` вместо `order_dish`

2. Запустите скрипт миграции:
   ```
   cd restaurant_app/backend
   python migrate_order_dish.py
   ```

3. Проверьте логи на наличие ошибок. Если миграция прошла успешно, вы увидите сообщение "Миграция таблицы order_dish в OrderDish успешно завершена!"

4. Перезапустите приложение:
   ```
   cd restaurant_app/backend
   uvicorn main:app --reload
   ```

## Проверка результатов

Для проверки успешности миграции выполните следующие действия:

1. Откройте браузер и перейдите по адресу `http://localhost:8000/api/v1/orders`
2. Убедитесь, что список заказов загружается корректно и отображаются все блюда
3. Создайте новый заказ и проверьте, что блюда добавляются правильно
4. Посмотрите детали существующего заказа, чтобы убедиться, что данные блюд отображаются корректно

## Откат изменений (при необходимости)

Если вы столкнулись с проблемами после миграции, вы можете вернуться к исходному состоянию, выполнив следующие шаги:

1. Измените имя таблицы в моделях обратно на `order_dish`
2. Создайте и запустите скрипт обратной миграции, который создаст таблицу `order_dish` и скопирует в нее данные из `OrderDish`
3. Перезапустите приложение 