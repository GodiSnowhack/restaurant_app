# Функционал сканирования QR-кода официантом

## Установка необходимых зависимостей

Перед использованием функционала сканирования QR-кода необходимо установить следующие пакеты:

```bash
npm install react-qr-scanner react-hot-toast
```

## Использование

### Для клиентов

1. Клиент создает заказ через приложение
2. В деталях заказа клиенту отображается QR-код
3. Клиент показывает QR-код официанту для сканирования

### Для официантов

1. Официант должен авторизоваться в системе с ролью "waiter" или "admin"
2. В панели официанта в нижней навигации есть кнопка "Сканировать QR"
3. После нажатия на кнопку открывается сканер QR-кода
4. Официант наводит камеру на QR-код клиента
5. После успешного сканирования заказ автоматически привязывается к текущему официанту
6. Заказ появляется в списке активных заказов официанта

## Структура проекта

- `components/QrCodeScanner.tsx` - компонент для сканирования QR-кода
- `pages/waiter/scan.tsx` - страница сканирования QR-кода
- `pages/waiter/orders/index.tsx` - страница списка заказов официанта
- `pages/waiter/orders/[id].tsx` - страница деталей заказа
- `components/WaiterDashboard.tsx` - панель управления официанта с навигацией
- `types/react-qr-scanner.d.ts` - определение типов для библиотеки react-qr-scanner

## API эндпоинты

- `POST /api/v1/orders/{order_id}/assign` - привязка заказа к официанту по коду заказа
- `GET /api/v1/orders/waiter` - получение заказов привязанных к текущему официанту

## Решение проблем

### Ошибка доступа к камере

Если возникает ошибка доступа к камере:
1. Проверьте, что браузер имеет разрешение на доступ к камере
2. Используйте безопасное соединение HTTPS
3. На мобильных устройствах - проверьте разрешения приложения

### Проблемы со сканированием

Если QR-код не сканируется:
1. Убедитесь, что QR-код хорошо освещен
2. Камера должна быть в фокусе на QR-коде
3. Проверьте, что QR-код не поврежден

При любых других проблемах обратитесь к технической поддержке. 