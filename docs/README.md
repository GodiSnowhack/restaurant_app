# Restaurant SPPR - Полное описание проекта

Данный документ содержит исчерпывающее описание проекта "Система поддержки принятия решений для управления рестораном". Здесь представлена информация о функциональности, архитектуре, пользовательских ролях и сценариях использования системы.

## Содержание

1. [Обзор проекта](#обзор-проекта)
2. [Архитектура системы](#архитектура-системы)
3. [Роли пользователей](#роли-пользователей)
4. [Функциональные модули](#функциональные-модули)
5. [Пользовательские интерфейсы](#пользовательские-интерфейсы)
6. [Страницы приложения](#страницы-приложения)
7. [Система поддержки принятия решений](#система-поддержки-принятия-решений)
8. [Технические детали](#технические-детали)
9. [Развертывание](#развертывание)

## Обзор проекта

Restaurant SPPR представляет собой комплексную информационную систему для автоматизации и оптимизации ресторанного бизнеса. Приложение объединяет в себе функции управления заказами, бронированиями, меню и персоналом, а также предоставляет аналитические инструменты для принятия обоснованных бизнес-решений.

Основные возможности системы:
- Управление меню и заказами
- Система бронирования столиков
- Интерфейсы для различных категорий пользователей
- Аналитика и отчеты
- Рекомендации по оптимизации бизнес-процессов

Система построена с использованием современного стека технологий:
- **Фронтенд**: Next.js, React, TailwindCSS
- **Бэкенд**: FastAPI, SQLAlchemy
- **База данных**: SQLite/PostgreSQL

## Архитектура системы

Приложение построено по архитектуре клиент-сервер с разделением на фронтенд и бэкенд.

### Структура проекта

```
restaurant_app/              # Корневая директория проекта
├── backend/                 # Бэкенд на FastAPI
│   ├── app/                 # Код приложения
│   │   ├── api/             # API-эндпоинты
│   │   ├── core/            # Базовые настройки
│   │   ├── crud/            # CRUD-операции с БД
│   │   ├── database/        # Конфигурация БД
│   │   ├── models/          # SQLAlchemy модели
│   │   ├── schemas/         # Pydantic схемы
│   │   ├── services/        # Бизнес-логика
│   │   └── utils/           # Вспомогательные функции
│   ├── main.py              # Точка входа
│   └── run.py               # Запуск сервера
├── frontend/                # Фронтенд на Next.js
│   ├── components/          # React компоненты
│   │   ├── layout/          # Компоненты лейаута
│   │   ├── ui/              # UI компоненты
│   │   └── ...              # Другие компоненты
│   ├── lib/                 # Утилиты и API-клиенты
│   ├── pages/               # Страницы приложения
│   │   ├── admin/           # Страницы админ-панели
│   │   ├── waiter/          # Страницы для официантов
│   │   ├── auth/            # Страницы авторизации
│   │   └── ...              # Публичные страницы
│   ├── styles/              # CSS и стили
│   └── public/              # Статические файлы
├── data/                    # Данные и миграции БД
└── docs/                    # Документация
```

### Основные технические компоненты

1. **Бэкенд (FastAPI)**
   - RESTful API с использованием асинхронных обработчиков
   - Валидация данных через Pydantic
   - ORM-слой с использованием SQLAlchemy
   - JWT-аутентификация
   - Документация API на базе OpenAPI

2. **Фронтенд (Next.js)**
   - Серверный рендеринг для оптимальной производительности
   - Компонентный подход с использованием React
   - Стилизация на основе TailwindCSS
   - Управление состоянием через контексты и хуки
   - Адаптивный и доступный интерфейс

3. **База данных**
   - SQLite для разработки
   - PostgreSQL для продакшена
   - Миграции с помощью Alembic

## Роли пользователей

В системе предусмотрены четыре основные роли пользователей, каждая с собственным набором возможностей:

### 1. Гость (неавторизованный пользователь)

Базовая роль для посетителей сайта без аутентификации.

**Возможности:**
- Просмотр меню ресторана
- Просмотр информации о ресторане
- Создание бронирования столика
- Регистрация и авторизация

### 2. Клиент (авторизованный пользователь)

Зарегистрированный пользователь с базовыми возможностями заказа.

**Возможности:**
- Все функции гостя
- Оформление заказов онлайн
- Просмотр истории заказов
- Управление профилем
- Отслеживание статуса текущих заказов
- Добавление отзывов о блюдах
- Просмотр и управление бронированиями
- Сохранение избранных блюд

### 3. Официант

Сотрудник ресторана, отвечающий за обслуживание посетителей.

**Возможности:**
- Просмотр назначенных столиков
- Создание и редактирование заказов
- Изменение статуса заказов
- Просмотр бронирований
- Просмотр меню
- Работа со специализированным интерфейсом для планшетов

### 4. Администратор

Роль с полным доступом к управлению рестораном.

**Возможности:**
- Управление пользователями и правами
- Управление меню и категориями
- Обработка всех заказов
- Управление бронированиями
- Настройка параметров ресторана
- Просмотр аналитики и отчетов
- Доступ к системе поддержки принятия решений

## Функциональные модули

### 1. Управление пользователями

Модуль для работы с учетными записями и авторизацией.

**Основные функции:**
- Регистрация новых пользователей
- Авторизация с помощью email/пароль
- Восстановление пароля
- Управление профилями пользователей
- Разграничение прав доступа
- Управление ролями пользователей
- Защита персональных данных

### 2. Управление меню

Модуль для работы с блюдами и категориями.

**Основные функции:**
- Создание и редактирование категорий
- Добавление и редактирование блюд
- Управление ценами и составом
- Добавление фотографий и описаний
- Управление акциями и специальными предложениями
- Расчет себестоимости и наценки
- Маркировка аллергенов и диетических ограничений
- Отзывы и рейтинги блюд

### 3. Управление заказами

Модуль для обработки заказов клиентов.

**Основные функции:**
- Создание новых заказов
- Отслеживание статуса заказов
- Изменение состава заказа
- Расчет стоимости с учетом скидок
- Выбор способа оплаты и доставки
- История заказов для клиентов
- Управление очередью заказов на кухне
- Уведомления о статусе заказа

### 4. Бронирование столиков

Модуль для управления столиками и их бронированием.

**Основные функции:**
- Интерактивная схема столиков ресторана
- Создание и управление бронированиями
- Проверка доступности столиков
- Настройка временных слотов
- Управление депозитами за бронь
- Уведомления о бронированиях
- QR-коды для подтверждения бронирования
- Статистика загруженности ресторана

### 5. Аналитика и отчеты

Модуль для сбора и анализа данных о работе ресторана.

**Основные функции:**
- Отчеты о продажах и доходах
- Анализ популярности блюд
- Статистика загруженности столиков
- Оценка эффективности персонала
- Анализ поведения клиентов
- Сезонные тренды и прогнозы
- Экспорт отчетов в различных форматах
- Визуализация данных с помощью графиков и диаграмм

### 6. Настройки ресторана

Модуль для конфигурации основных параметров ресторана.

**Основные функции:**
- Управление основной информацией (название, контакты)
- Настройка часов работы
- Управление налогами и наценками
- Настройка способов оплаты
- Конфигурация параметров доставки
- Управление изображениями и медиа-контентом
- Настройка уведомлений

## Пользовательские интерфейсы

### Публичная часть (для гостей и клиентов)

Открытая часть сайта, доступная без авторизации.

**Особенности:**
- Адаптивный дизайн для всех устройств
- Поддержка темной и светлой темы
- Интуитивно понятная навигация
- Детальные карточки блюд с фотографиями
- Простой процесс бронирования столиков
- Удобный процесс оформления заказа
- Информация о ресторане и контактах

### Административная панель

Интерфейс для управления рестораном, доступный администраторам.

**Особенности:**
- Информативные дашборды с ключевыми показателями
- Интерактивные графики и диаграммы
- Таблицы с сортировкой и фильтрацией
- Система уведомлений о важных событиях
- Инструменты для массового редактирования
- Модули аналитики и отчетности
- Настройки ресторана и системы

### Панель официанта

Специализированный интерфейс для работы официантов на планшетах.

**Особенности:**
- Оптимизация для сенсорных экранов
- Быстрый доступ к часто используемым функциям
- Интерактивная схема столиков с цветовой индикацией
- Простой процесс создания заказа
- Уведомления о новых заказах и бронированиях
- Оптимизация для быстрой работы
- Минималистичный дизайн

## Страницы приложения

Ниже представлен список основных страниц приложения с их описанием:

### Публичные страницы

1. **Главная страница (/)**
   - Отображает приветственный текст из настроек ресторана
   - Показывает основную информацию о ресторане
   - Содержит секцию с популярными блюдами
   - Предоставляет кнопки для перехода к меню и бронированию

2. **Страница меню (/menu)**
   - Отображает список всех блюд по категориям
   - Позволяет фильтровать блюда
   - Показывает информацию о каждом блюде
   - Предоставляет возможность добавления в корзину

3. **Страница детального просмотра блюда (/menu/[id])**
   - Отображает подробную информацию о блюде
   - Показывает крупное изображение блюда
   - Позволяет выбрать количество порций
   - Отображает рекомендуемые или похожие блюда

4. **Корзина (/cart)**
   - Отображает список добавленных блюд
   - Позволяет изменять количество порций
   - Рассчитывает общую стоимость заказа
   - Содержит кнопку для перехода к оформлению

5. **Оформление заказа (/checkout)**
   - Предоставляет форму для ввода данных заказчика
   - Позволяет выбрать тип заказа (доставка/самовывоз)
   - Включает выбор способа оплаты
   - Отображает итоговую сумму заказа

6. **Бронирование столиков (/reservations)**
   - Отображает схему столиков ресторана
   - Предоставляет календарь для выбора даты
   - Позволяет выбрать время бронирования
   - Предоставляет форму для ввода данных бронирования

7. **Авторизация (/auth/login)**
   - Предоставляет форму для ввода учетных данных
   - Осуществляет валидацию введенных данных
   - Поддерживает вход через сторонние сервисы
   - Содержит ссылку на регистрацию

8. **Регистрация (/auth/register)**
   - Предоставляет форму для создания нового аккаунта
   - Осуществляет валидацию данных в реальном времени
   - Автоматически авторизует после успешной регистрации
   - Содержит политику конфиденциальности

### Страницы для авторизованных пользователей

9. **Профиль пользователя (/profile)**
   - Отображает персональную информацию пользователя
   - Позволяет редактировать личные данные
   - Отображает историю заказов и бронирований
   - Предоставляет управление настройками

10. **Заказы пользователя (/orders)**
    - Отображает список всех заказов пользователя
    - Показывает информацию о каждом заказе
    - Позволяет фильтровать и искать заказы
    - Отображает статусы заказов в реальном времени

11. **Детальная информация о заказе (/orders/[id])**
    - Отображает полную информацию о заказе
    - Показывает список блюд и их стоимость
    - Отображает статус заказа и историю изменений
    - Предоставляет возможность связаться с рестораном

### Страницы для администраторов

12. **Административная панель (/admin)**
    - Отображает ключевые показатели ресторана (KPI)
    - Показывает статистику по заказам и бронированиям
    - Предоставляет быстрый доступ к основным разделам
    - Содержит уведомления о важных событиях

13. **Аналитика (/admin/analytics)**
    - Предоставляет расширенную статистику
    - Отображает графики и диаграммы по различным показателям
    - Позволяет сравнивать периоды и анализировать тренды
    - Предоставляет возможность экспорта отчетов

14. **Управление заказами (/admin/orders)**
    - Отображает полный список всех заказов
    - Предоставляет инструменты фильтрации и поиска
    - Позволяет менять статусы заказов
    - Предоставляет доступ к истории изменений

15. **Управление меню (/admin/menu)**
    - Позволяет создавать и редактировать категории
    - Предоставляет возможность добавления и редактирования блюд
    - Включает инструменты для управления ценами
    - Позволяет настраивать акции и специальные предложения

16. **Управление пользователями (/admin/users)**
    - Отображает список всех пользователей
    - Позволяет создавать и редактировать учетные записи
    - Предоставляет управление ролями и правами
    - Включает инструменты для блокировки пользователей

17. **Настройки ресторана (/admin/settings)**
    - Предоставляет интерфейс для настройки основных параметров
    - Позволяет управлять часами работы и контактами
    - Включает настройки налогов и способов оплаты
    - Предоставляет конфигурацию уведомлений и интеграций

### Страницы для официантов

18. **Панель официанта (/waiter)**
    - Отображает текущие заказы официанта
    - Показывает статус всех столиков
    - Предоставляет информацию о бронированиях
    - Позволяет быстро создавать новые заказы

19. **Создание заказа (/waiter/create-order)**
    - Предоставляет интерфейс для создания заказа
    - Отображает схему столиков и их статус
    - Показывает полное меню ресторана
    - Позволяет добавлять комментарии к заказу

20. **Управление столиками (/waiter/bind)**
    - Позволяет привязывать столики к официанту
    - Отображает текущие привязки столиков
    - Предоставляет информацию о загруженности столиков
    - Позволяет передавать столики между официантами

## Система поддержки принятия решений

Особый модуль, который анализирует данные о работе ресторана и предлагает рекомендации для оптимизации бизнес-процессов.

### 1. Оптимизация меню

**Функции и рекомендации:**
- Выявление наименее продаваемых блюд с предложениями по обновлению
- Анализ прибыльности каждого блюда и рекомендации по корректировке цен
- Определение оптимальной структуры меню и категорий
- Рекомендации по сезонным обновлениям меню
- Анализ сочетаемости блюд и предложения по комбо-наборам

### 2. Управление персоналом

**Функции и рекомендации:**
- Прогнозирование необходимого количества персонала в разные дни и часы
- Оценка эффективности работы каждого официанта
- Рекомендации по распределению столиков между официантами
- Анализ скорости обслуживания и предложения по улучшению
- Выявление пиковых нагрузок и рекомендации по оптимизации работы

### 3. Маркетинговые акции

**Функции и рекомендации:**
- Предложения по акциям на основе анализа продаж
- Прогноз эффективности различных типов акций
- Рекомендации по дням недели и времени для проведения акций
- Анализ результативности прошлых маркетинговых активностей
- Предложения по целевой аудитории для акций

### 4. Оптимизация запасов

**Функции и рекомендации:**
- Прогнозирование необходимых запасов продуктов на основе истории продаж
- Рекомендации по оптимальным закупкам для минимизации отходов
- Анализ сроков хранения и рекомендации по управлению запасами
- Выявление сезонных колебаний в потреблении ингредиентов
- Предложения по оптимизации меню для снижения расходов на закупки

### 5. Финансовое планирование

**Функции и рекомендации:**
- Прогнозирование доходов и расходов на будущие периоды
- Анализ факторов, влияющих на прибыль ресторана
- Рекомендации по ценообразованию с учетом конкуренции и спроса
- Выявление наиболее прибыльных дней и часов работы
- Анализ рентабельности различных направлений деятельности

## Технические детали

### Технологический стек

1. **Фронтенд**
   - Next.js - фреймворк для React с серверным рендерингом
   - React - библиотека для создания пользовательских интерфейсов
   - TailwindCSS - утилитарный CSS-фреймворк
   - Redux / Context API - управление состоянием
   - Axios - HTTP-клиент для запросов к API
   - ChartJS / D3.js - визуализация данных

2. **Бэкенд**
   - FastAPI - асинхронный веб-фреймворк для Python
   - SQLAlchemy - ORM для работы с базами данных
   - Pydantic - валидация и сериализация данных
   - JWT - аутентификация и авторизация
   - Alembic - миграции базы данных
   - Celery - обработка фоновых задач

3. **Базы данных и хранение**
   - SQLite - для разработки
   - PostgreSQL - для продакшена
   - Redis - для кэширования и сессий

### API и интеграции

1. **Основные API-эндпоинты**
   - `/api/v1/auth` - Аутентификация и регистрация
   - `/api/v1/users` - Управление пользователями
   - `/api/v1/menu` - Управление меню (категории, блюда)
   - `/api/v1/orders` - Управление заказами
   - `/api/v1/reservations` - Бронирование столиков
   - `/api/v1/analytics` - Аналитика и отчеты

2. **Возможные интеграции**
   - Платежные шлюзы (Stripe, PayPal)
   - Сервисы доставки (API доставки)
   - Сервисы SMS и email рассылок
   - CRM-системы
   - Учетные системы и ERP

### Безопасность

- Защита от CSRF и XSS-атак
- Безопасное хранение паролей (bcrypt)
- Проверка прав доступа к ресурсам
- Ограничение частоты запросов (rate limiting)
- Шифрование конфиденциальных данных
- Логирование действий в системе

## Развертывание

### Требования к окружению

- Python 3.9+
- Node.js 14+
- NPM или Yarn
- Docker и Docker Compose (опционально)
- Доступ к PostgreSQL (для продакшена)
- Redis (для продакшена)

### Локальный запуск для разработки

1. **Клонирование репозитория**
   ```bash
   git clone <repository-url>
   cd restaurant_app
   ```

2. **Запуск бэкенда**
   ```bash
   cd backend
   python -m venv venv
   source venv/bin/activate  # На Windows: venv\Scripts\activate
   pip install -r requirements.txt
   python run.py
   ```

3. **Запуск фронтенда**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

4. **Доступ к приложению**
   - Фронтенд: http://localhost:3000
   - API бэкенда: http://localhost:8000
   - Документация API: http://localhost:8000/docs

### Запуск с Docker Compose

```bash
docker-compose up -d
```

### Развертывание в продакшен

Для развертывания в продакшен рекомендуется использовать:
- Nginx в качестве прокси-сервера
- Gunicorn для запуска FastAPI
- PostgreSQL в качестве основной базы данных
- Redis для кэширования
- HTTPS с сертификатом Let's Encrypt
- Системы мониторинга и логирования 